---
title: "devlog #0: A Roguelike for 2024 ?"
date: 2023-12-26
categories: [Pet Project]
tags: [bevy, devlog, ecs, roguelike, rust]
---

## Introduction

Over the last two months, I've been hooked on
[Tales of Maj'Eyal](https://en.wikipedia.org/wiki/Tales_of_Maj%27Eyal), playing
it almost on a daily basis. Developed in 2012, its gameplay and engine derive 
draw inspiration directly from classical roguelikes, particularly
[Angband](https://en.wikipedia.org/wiki/Angband_(video_game)) which is itself
based on [Moria](https://en.wikipedia.org/wiki/Moria_(1983_video_game)).

The game is quite straightforward â€“ you guide a top-down character through a 2D
world. Navigating randomly generated levels, your goal is to defeat the final
boss. Despite its apparent simplicity, its richness lies in the sheer number of 
playable classes and races, its difficulty modes and its various campaigns 
(some DLCs, arena mode, infinite dungeon mode, etc).

{: style="text-align:center"}
![tome4-1](/assets/img/blog/devlog/tome4-character-creation.png)
*You can play up to [37 classes](https://te4.org/wiki/Class) and [16 races](https://te4.org/wiki/Race)*

{: style="text-align:center"}
![tome4-2](https://i.redd.it/5aftw4rj48n11.png)
*The interface consists of inanimated sprites and a user interface similar to other RPGs*

I won't cover that game in depth, but I highly recommend you to check it out. 
It's worth playing! I've been toying with the idea of creating my own roguelike
game in a similar fashion. My inspirations draw heavily from Tales of Maj'Eyal,
as well as the following games:

- [Dofus](https://en.wikipedia.org/wiki/Dofus)
- [Dwarf Fortress](https://en.wikipedia.org/wiki/Dwarf_Fortress)
- [Final Fantasy Tactics Advance](https://en.wikipedia.org/wiki/Final_Fantasy_Tactics_Advance)
- [Into the Breach](https://en.wikipedia.org/wiki/Into_the_Breach)
- [NetHack](https://en.wikipedia.org/wiki/NetHack)
- [Triangle Strategy](https://en.wikipedia.org/wiki/Triangle_Strategy)

## Project Overview

The project's scope isn't entirely clear at the moment, but my primary aim is to
explore the extent to which I can develop my own roguelike. As it's currently in
the prototype phase, there's no set plan for a release.

In terms of the tech stack, I went for Rust and Bevy because I prefer steering
clear of the complexities of game engines akin to a Rube Goldberg machine, like
Unity or Godot. Moreover, since my 
[last silly pet project](/_posts/2023-10-31-a-silly-project-for-halloween.md),
I've been wanting eager to delve deeper into Bevy and the ECS paradigm.

I didn't want to create this devlog entiry from scratch since I felt it would
lack actual content to talk about. Therefore, I dedicated the month of December
to building a first version that can be expanded upon.

## First version

In every project, the most difficult part is the beginning: where to start ?
Aiming too big from the start is the best way to give up, so I aimed very small.
My very first objective was to display a tileset image in a window. I spent
about 5-10 minutes crafting 3 rather rudimentary 64x64px tiles in Gimp,
arranging them into a single image (a tileset).
I then used Bevy's 
[TextureAtlas](https://docs.rs/bevy/latest/bevy/sprite/struct.TextureAtlas.html)
to display this tileset.
(see [related commit](https://github.com/boreec/roguelike/tree/5ca14e73de063356d455661970db60c8b8f9ff9b)).

{: style="text-align:center"}
![roguelike-1](/assets/img/blog/devlog/roguelike-0001.png)
*Step 1: Display a tileset image*

For the next step, I created a first 10x10 map by spawning tile entities (with
Bevy's [SpriteSheetBundle](https://docs.rs/bevy/latest/bevy/prelude/struct.SpriteSheetBundle.html)).
The map was not displayed properly as Bevy's coordinates origin is the middle of
the screen (see [related commit](https://github.com/boreec/roguelike/tree/603d43d8f4a5a91152a0b1a8c32b298758562867)).

{: style="text-align:center"}
![roguelike-2](/assets/img/blog/devlog/roguelike-0002.png)
*Step 2: Display individual tiles, forming a 10x10 map*

I fixed the rendering by shifting all tiles in relation with the origin. This
[blog post](https://www.mikechambers.com/blog/2022/10/29/understanding-the-2d-coordinate-system-in-bevy/)
written by Mike Chambers details how Bevy's coordinates system work. Besided the
map, there's also the character's tile showing up (see [related commit](https://github.com/boreec/roguelike/tree/adbc39c47a4fab1f6fafcbbbfe066a93065355c2))

{: style="text-align:center"}
![roguelike-3](/assets/img/blog/devlog/roguelike-0003.png)
*Step 3: Fix the map rendering and display character sprite*

I won't cover every small steps from there, but the next things were to make the
character moves within the map. For that I added a system for moving the player
entity 
the character within the map and to center the camera on it (see [related commit]()).

{: style="text-align:center"}
![roguelike-4](/assets/img/blog/devlog/roguelike-0004.png)
*Step 4:*

{: style="text-align:center"}
![roguelike-5](/assets/img/blog/devlog/roguelike-0005.png)
*Step 5:*

,then added movements, obstacle detection, zoom with mouse scrolls,  

Final result

<iframe width="560" height="315" src="https://www.youtube.com/embed/A49WU099Igs?si=mlRDa44-9REF6Scs" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

The source code is available on [GitHub](https://github.com/boreec/roguelike).


## About the devlog

## Closing Thoughts

